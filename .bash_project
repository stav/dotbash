# .bash_project: executed by .bash_profile
# Project context switching using Python virtual environments

declare -A projekts

[ -r ~/.bash_projects ] && source ~/.bash_projects

function sw ()
{
	if [ ${#projekts[@]} -gt 0 ]; then # We have projects in private
		# echo " ${#projekts[@]} projects"

		if [ -n "$1" ]; then # We have a command argument
			# echo " Looking @ $1: (${projekts[$1]})"

			if [ -n "${projekts[$1]}" ]; then # We have a valid project
				project=(${projekts[$1]})
				venv=${project[0]}
				vdir=${project[1]}
				# echo " Working on ($venv) in ($vdir)"

				[ $venv != 0 ] && workon $venv
				[ -n "$vdir" ] && cd "$HOME/$vdir"
			else
				return 1
			fi

		else
			# List projects
			echo
			echo 'PROJECTS'
			echo
			for p in "${!projekts[@]}";do
				echo " $p : ${projekts[$p]}"
			done
			echo
			echo 'ENVIRONMENTS'
			echo
			workon
			return 0
		fi
	fi
}
